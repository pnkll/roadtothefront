{"ast":null,"code":"import { getAuth, login, logout } from \"../../components/api/api\";\nimport { setUserData } from \"../authReducer\";\nexport const checkAuth = () => dispatch => {\n  getAuth().then(response => {\n    const login = response.data.data.login;\n    const email = response.data.data.email;\n    const userId = response.data.data.id;\n    const result = response.data.resultCode;\n\n    if (result === 0) {\n      dispatch(setUserData(userId, login, email, true));\n    }\n  });\n};\nexport const loginThunk = values => dispatch => {\n  login(values.email, values.password, values.rememberMe).then(response => {\n    if (response.data.resultCode === 0) {\n      // dispatch(setUserData(response.data.data.userId, 'painkill', values.email))\n      dispatch(checkAuth());\n    } else {\n      console.log(response.data);\n    }\n  });\n};\nexport const logoutThunk = () => dispatch => {\n  logout().then(response => {\n    if (response.data.resultCode === 0) {\n      dispatch(setUserData(null, null, null, false));\n    }\n  });\n};","map":{"version":3,"sources":["/home/painkill/Рабочий стол/projects/socialNetwork/roadtothefront/src/redux/async/authThunk.js"],"names":["getAuth","login","logout","setUserData","checkAuth","dispatch","then","response","data","email","userId","id","result","resultCode","loginThunk","values","password","rememberMe","console","log","logoutThunk"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,KAAlB,EAAyBC,MAAzB,QAAuC,0BAAvC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAD,IAAc;AACzCL,EAAAA,OAAO,GACJM,IADH,CACQC,QAAQ,IAAI;AAChB,UAAMN,KAAK,GAAGM,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBP,KAAjC;AACA,UAAMQ,KAAK,GAAGF,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,KAAjC;AACA,UAAMC,MAAM,GAAGH,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBG,EAAlC;AACA,UAAMC,MAAM,GAAGL,QAAQ,CAACC,IAAT,CAAcK,UAA7B;;AACA,QAAKD,MAAM,KAAK,CAAhB,EAAkB;AAClBP,MAAAA,QAAQ,CAACF,WAAW,CAACO,MAAD,EAAST,KAAT,EAAgBQ,KAAhB,EAAuB,IAAvB,CAAZ,CAAR;AACC;AACF,GATH;AAUH,CAXM;AAaP,OAAO,MAAMK,UAAU,GAAIC,MAAD,IAAaV,QAAD,IAAc;AAClDJ,EAAAA,KAAK,CAACc,MAAM,CAACN,KAAR,EAAeM,MAAM,CAACC,QAAtB,EAAgCD,MAAM,CAACE,UAAvC,CAAL,CACCX,IADD,CACMC,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,IAAT,CAAcK,UAAd,KAA6B,CAAjC,EAAoC;AAClC;AACAR,MAAAA,QAAQ,CAACD,SAAS,EAAV,CAAR;AACD,KAHD,MAIK;AACHc,MAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAQ,CAACC,IAArB;AACD;AACF,GATD;AAUD,CAXM;AAaP,OAAO,MAAMY,WAAW,GAAG,MAAOf,QAAD,IAAc;AAC7CH,EAAAA,MAAM,GACLI,IADD,CACMC,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,IAAT,CAAcK,UAAd,KAA6B,CAAjC,EAAmC;AACjCR,MAAAA,QAAQ,CAACF,WAAW,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,KAAnB,CAAZ,CAAR;AACD;AACF,GALD;AAOD,CARM","sourcesContent":["import { getAuth, login, logout } from \"../../components/api/api\"\nimport { setUserData } from \"../authReducer\"\n\nexport const checkAuth = () => (dispatch) => {\n    getAuth()\n      .then(response => {\n        const login = response.data.data.login\n        const email = response.data.data.email\n        const userId = response.data.data.id\n        const result = response.data.resultCode\n        if ( result === 0){\n        dispatch(setUserData(userId, login, email, true))\n        }\n      })\n}\n\nexport const loginThunk = (values) => (dispatch) => {\n  login(values.email, values.password, values.rememberMe)\n  .then(response => {\n    if (response.data.resultCode === 0) {\n      // dispatch(setUserData(response.data.data.userId, 'painkill', values.email))\n      dispatch(checkAuth())\n    }\n    else {\n      console.log(response.data)\n    }\n  })\n}\n\nexport const logoutThunk = () => (dispatch) => {\n  logout()\n  .then(response => {\n    if (response.data.resultCode === 0){\n      dispatch(setUserData(null, null, null, false))\n    }\n  }\n  )\n}"]},"metadata":{},"sourceType":"module"}