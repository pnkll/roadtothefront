{"ast":null,"code":"import { getAuth, login, logout } from \"../../components/api/api\";\nimport { authError, setUserData } from \"../authReducer\";\nexport const checkAuth = () => dispatch => {\n  return getAuth().then(response => {\n    const login = response.data.data.login;\n    const email = response.data.data.email;\n    const userId = response.data.data.id;\n    const result = response.data.resultCode;\n\n    if (result === 0) {\n      dispatch(setUserData(userId, login, email, true));\n    }\n  });\n};\nexport const loginThunk = values => dispatch => {\n  login(values.email, values.password, values.rememberMe).then(response => {\n    if (response.data.resultCode === 0) {\n      // dispatch(setUserData(response.data.data.userId, 'painkill', values.email))\n      dispatch(checkAuth());\n    } else {\n      dispatch(authError(response.data.messages[0]));\n    }\n  });\n};\nexport const logoutThunk = () => dispatch => {\n  logout().then(response => {\n    if (response.data.resultCode === 0) {\n      dispatch(setUserData(null, null, null, false));\n      console.log('hello');\n    }\n  });\n};","map":{"version":3,"sources":["/home/painkill/Рабочий стол/projects/socialNetwork/roadtothefront/src/redux/async/authThunk.js"],"names":["getAuth","login","logout","authError","setUserData","checkAuth","dispatch","then","response","data","email","userId","id","result","resultCode","loginThunk","values","password","rememberMe","messages","logoutThunk","console","log"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,KAAlB,EAAyBC,MAAzB,QAAuC,0BAAvC;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,gBAAvC;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAOC,QAAD,IAAc;AACzC,SAAON,OAAO,GACXO,IADI,CACCC,QAAQ,IAAI;AAChB,UAAMP,KAAK,GAAGO,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBR,KAAjC;AACA,UAAMS,KAAK,GAAGF,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,KAAjC;AACA,UAAMC,MAAM,GAAGH,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBG,EAAlC;AACA,UAAMC,MAAM,GAAGL,QAAQ,CAACC,IAAT,CAAcK,UAA7B;;AACA,QAAKD,MAAM,KAAK,CAAhB,EAAkB;AAClBP,MAAAA,QAAQ,CAACF,WAAW,CAACO,MAAD,EAASV,KAAT,EAAgBS,KAAhB,EAAuB,IAAvB,CAAZ,CAAR;AACC;AACF,GATI,CAAP;AAUH,CAXM;AAaP,OAAO,MAAMK,UAAU,GAAIC,MAAD,IAAaV,QAAD,IAAc;AAClDL,EAAAA,KAAK,CAACe,MAAM,CAACN,KAAR,EAAeM,MAAM,CAACC,QAAtB,EAAgCD,MAAM,CAACE,UAAvC,CAAL,CACCX,IADD,CACMC,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,IAAT,CAAcK,UAAd,KAA6B,CAAjC,EAAoC;AAClC;AACAR,MAAAA,QAAQ,CAACD,SAAS,EAAV,CAAR;AACD,KAHD,MAIK;AACHC,MAAAA,QAAQ,CAACH,SAAS,CAACK,QAAQ,CAACC,IAAT,CAAcU,QAAd,CAAuB,CAAvB,CAAD,CAAV,CAAR;AACD;AACF,GATD;AAUD,CAXM;AAaP,OAAO,MAAMC,WAAW,GAAG,MAAOd,QAAD,IAAc;AAC7CJ,EAAAA,MAAM,GACLK,IADD,CACMC,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,IAAT,CAAcK,UAAd,KAA6B,CAAjC,EAAmC;AACjCR,MAAAA,QAAQ,CAACF,WAAW,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,KAAnB,CAAZ,CAAR;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD;AACF,GAND;AAQD,CATM","sourcesContent":["import { getAuth, login, logout } from \"../../components/api/api\"\nimport { authError, setUserData } from \"../authReducer\"\n\nexport const checkAuth = () => (dispatch) => {\n    return getAuth()\n      .then(response => {\n        const login = response.data.data.login\n        const email = response.data.data.email\n        const userId = response.data.data.id\n        const result = response.data.resultCode\n        if ( result === 0){\n        dispatch(setUserData(userId, login, email, true))\n        }\n      })\n}\n\nexport const loginThunk = (values) => (dispatch) => {\n  login(values.email, values.password, values.rememberMe)\n  .then(response => {\n    if (response.data.resultCode === 0) {\n      // dispatch(setUserData(response.data.data.userId, 'painkill', values.email))\n      dispatch(checkAuth())\n    }\n    else {\n      dispatch(authError(response.data.messages[0]))\n    }\n  })\n}\n\nexport const logoutThunk = () => (dispatch) => {\n  logout()\n  .then(response => {\n    if (response.data.resultCode === 0){\n      dispatch(setUserData(null, null, null, false))\n      console.log('hello')\n    }\n  }\n  )\n}"]},"metadata":{},"sourceType":"module"}